# 施設管理

## 背景

施設の運営には、施設・部屋タイプ・部屋の基本情報の管理が不可欠である。これらの情報は予約管理や料金設定の基盤となるため、正確かつ最新の状態を保つ必要がある。

## 目的

- 施設の基本情報を一元管理し、複数施設を効率的に運営できるようにする
- 部屋タイプごとの特性や料金設定を管理し、多様な宿泊ニーズに対応する
- 各部屋の状態を適切に管理し、予約可能性や清掃対象の判定を正確に行う

## 主要アクター

- 施設管理者
- 予約管理担当者
- フロントスタッフ
- 清掃スタッフ

## 業務概要

施設管理では、施設・部屋タイプ・部屋の登録、更新、削除、参照を行う。施設情報には名称、住所、チェックイン/チェックアウト時刻などが含まれ、部屋タイプには収容人数、喫煙可否、標準料金などが設定される。各部屋は部屋番号と部屋タイプに紐づけられ、状態ステータスによって予約可能性が制御される。

## 要求

### 施設管理者
施設情報・部屋タイプ・部屋情報の登録・更新、プライシング・レート設定を行う

## 機能

### 施設情報を管理する
- 施設情報を登録する
  - 施設を登録する（画面：施設登録画面、アクター：施設管理者）
  - 新規施設の基本情報を登録する
- 施設情報を更新する
  - 施設を更新する（画面：施設更新画面、アクター：施設管理者）
  - 既存施設の情報を変更する
- 施設情報を削除する
  - 施設を削除する（画面：施設削除画面、アクター：施設管理者）
  - 不要な施設情報を削除する
- 施設情報を参照する
  - 施設を検索する（画面：施設検索画面、アクター：施設管理者、予約管理担当者）
  - 条件に基づいて施設を検索する

### 部屋タイプを管理する
- 部屋タイプを登録する
  - 部屋タイプを登録する（画面：部屋タイプ登録画面、アクター：施設管理者）
  - 新規部屋タイプの情報を登録する
- 部屋タイプを更新する
  - 部屋タイプを更新する（画面：部屋タイプ更新画面、アクター：施設管理者）
  - 既存部屋タイプの情報を変更する
- 部屋タイプを削除する
  - 部屋タイプを削除する（画面：部屋タイプ削除画面、アクター：施設管理者）
  - 不要な部屋タイプを削除する
- 部屋タイプを参照する
  - 部屋タイプを検索する（画面：部屋タイプ検索画面、アクター：施設管理者、予約管理担当者）
  - 条件に基づいて部屋タイプを検索する

### 部屋を管理する
- 部屋を登録する
  - 部屋を登録する（画面：部屋登録画面、アクター：施設管理者）
  - 新規部屋の情報を登録する
- 部屋を更新する
  - 部屋を更新する（画面：部屋更新画面、アクター：施設管理者）
  - 既存部屋の情報を変更する
- 部屋を削除する
  - 部屋を削除する（画面：部屋削除画面、アクター：施設管理者）
  - 不要な部屋情報を削除する
- 部屋を参照する
  - 部屋を検索する（画面：部屋検索画面、アクター：施設管理者、フロントスタッフ、清掃スタッフ）
  - 条件に基づいて部屋を検索する

## ビジネスルール

### 複数施設同時表示
- コンテキスト：予約管理
- 説明：予約管理担当者は、複数施設の予約状況を一画面で確認できる

### 部屋状態に基づく予約制限
- コンテキスト：施設管理
- 説明：Out-of-order状態の部屋は予約対象から除外する
- 関連バリエーション：部屋状態ステータス（Vacant, Occupied, Dirty, Cleaning, Inspected, Out-of-order）
- 関連状態モデル：部屋状態

## ビジネスパラメーター

### 部屋状態ステータス
- 値：Vacant、Occupied、Dirty、Cleaning、Inspected、Out-of-order
- 説明：部屋の利用可否と清掃状況を表し、予約可能性や清掃対象の判定に使用する
- 状態遷移：
  - Vacant → Occupied（チェックインを完了する）
  - Occupied → Dirty（部屋を清掃前状態にする）
  - Dirty → Cleaning（清掃開始を記録する）
  - Cleaning → Inspected（清掃完了を記録する）
  - Inspected → Vacant（部屋をVacant状態にする）
  - Vacant → Out-of-order（部屋を更新する）
  - Out-of-order → Vacant（部屋を更新する）

### 喫煙可否
- 値：喫煙可、禁煙
- 説明：部屋の喫煙可否を表し、予約時の部屋タイプ選択に使用する
