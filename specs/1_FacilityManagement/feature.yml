actor:
  - name: 施設管理者
    description: 施設の基本情報、部屋タイプ、部屋の登録・更新・削除を担当する責任者。施設運営全体の設定を管理し、予約管理や料金設定の基盤データを維持する。
  - name: 予約管理担当者
    description: 予約業務を担当するスタッフ。施設や部屋タイプの情報を参照し、顧客の予約に対応する。
  - name: フロントスタッフ
    description: チェックイン・チェックアウト業務を担当するスタッフ。部屋の空き状況を確認し、顧客対応を行う。
  - name: 清掃スタッフ
    description: 部屋の清掃を担当するスタッフ。清掃対象の部屋を確認し、清掃状況を報告する。

external_system: []

aggregate:
  - 施設
  - 部屋タイプ
  - 部屋

feature:
  - name: 施設情報の登録・更新・削除
    description: 施設管理者が宿泊施設の基本情報（名称、住所、チェックイン/チェックアウト時刻など）を登録・変更・削除できる。複数施設の一元管理を実現し、施設運営の基盤を構築する。
    events:
      - 施設が登録された
      - 施設が更新された
      - 施設が削除された
    policy: []
    scenarios:
      - name: 新規施設の開業準備フロー
        precondition: 施設管理者がログイン済み、新規施設の基本情報が確定している
        steps:
          - 施設登録画面を開く
          - 施設名、住所、連絡先を入力する
          - チェックイン時刻とチェックアウト時刻を設定する
          - 施設の詳細情報（アメニティ、駐車場有無など）を入力する
          - 入力内容を確認し、施設を登録する
        postcondition: 施設が登録され、部屋タイプや部屋の登録が可能になる
      - name: 施設情報の変更フロー
        precondition: 対象施設が登録済み、変更内容が確定している
        steps:
          - 施設検索画面で対象施設を検索する
          - 施設詳細から更新画面を開く
          - 変更が必要な項目（営業時間、連絡先など）を修正する
          - 変更内容を確認し、更新を実行する
        postcondition: 施設情報が更新され、関連する予約や表示に反映される

  - name: 施設情報の検索・参照
    description: 施設管理者や予約管理担当者が登録済みの施設情報を検索・参照できる。複数施設の状況を把握し、業務効率を向上させる。
    events:
      - 施設が検索された
    policy: []
    scenarios:
      - name: 施設一覧の確認フロー
        precondition: 施設管理者または予約管理担当者がログイン済み
        steps:
          - 施設検索画面を開く
          - 必要に応じて検索条件（地域、施設名など）を入力する
          - 検索を実行し、該当する施設の一覧を表示する
          - 詳細を確認したい施設を選択し、詳細情報を表示する
        postcondition: 施設情報が確認でき、必要な業務判断が行える

  - name: 部屋タイプの登録・更新・削除
    description: 施設管理者が部屋タイプ（収容人数、喫煙可否、標準料金など）を登録・変更・削除できる。多様な宿泊ニーズに対応するための部屋分類を管理する。
    events:
      - 部屋タイプが登録された
      - 部屋タイプが更新された
      - 部屋タイプが削除された
    policy: []
    scenarios:
      - name: 新規部屋タイプの追加フロー
        precondition: 施設管理者がログイン済み、対象施設が登録済み
        steps:
          - 部屋タイプ登録画面を開く
          - 対象施設を選択する
          - 部屋タイプ名（シングル、ダブル、ツインなど）を入力する
          - 収容人数、喫煙可否、ベッド構成を設定する
          - 標準料金を設定する
          - 部屋タイプの説明やアメニティ情報を入力する
          - 入力内容を確認し、部屋タイプを登録する
        postcondition: 部屋タイプが登録され、このタイプの部屋を登録可能になる
      - name: 部屋タイプの料金改定フロー
        precondition: 対象部屋タイプが登録済み、新料金が決定している
        steps:
          - 部屋タイプ検索画面で対象の部屋タイプを検索する
          - 部屋タイプ詳細から更新画面を開く
          - 標準料金を新しい金額に変更する
          - 変更内容を確認し、更新を実行する
        postcondition: 部屋タイプの料金が更新され、以降の予約に反映される

  - name: 部屋タイプの検索・参照
    description: 施設管理者や予約管理担当者が部屋タイプ情報を検索・参照できる。予約時の部屋選択や料金確認に活用する。
    events:
      - 部屋タイプが検索された
    policy: []
    scenarios:
      - name: 部屋タイプの比較確認フロー
        precondition: 予約管理担当者がログイン済み、顧客から問い合わせを受けている
        steps:
          - 部屋タイプ検索画面を開く
          - 対象施設を選択する
          - 部屋タイプ一覧を表示する
          - 各部屋タイプの収容人数、料金、アメニティを比較確認する
          - 顧客のニーズに合った部屋タイプを特定する
        postcondition: 適切な部屋タイプを選定し、顧客に案内できる

  - name: 部屋の登録・更新・削除
    description: 施設管理者が各部屋の情報（部屋番号、部屋タイプ、状態ステータス）を登録・変更・削除できる。部屋状態の管理により、予約可能性や清掃対象を正確に判定する。
    events:
      - 部屋が登録された
      - 部屋が更新された
      - 部屋が削除された
      - 部屋状態が変更された
    policy:
      - name: 使用不可部屋の予約除外ポリシー
        trigger: 部屋状態が変更された
        action: Out-of-order状態の部屋を予約対象から除外する
    scenarios:
      - name: 新規部屋の登録フロー
        precondition: 施設管理者がログイン済み、施設と部屋タイプが登録済み
        steps:
          - 部屋登録画面を開く
          - 対象施設を選択する
          - 部屋番号を入力する
          - 該当する部屋タイプを選択する
          - 初期状態（通常はVacant）を設定する
          - 入力内容を確認し、部屋を登録する
        postcondition: 部屋が登録され、予約対象として利用可能になる
      - name: 部屋のメンテナンス開始フロー
        precondition: 対象部屋に予約がない状態、メンテナンスが必要と判断されている
        steps:
          - 部屋検索画面で対象の部屋を検索する
          - 部屋詳細から更新画面を開く
          - 部屋状態をOut-of-orderに変更する
          - メンテナンス理由をメモ欄に記録する
          - 更新を実行する
        postcondition: 部屋がOut-of-order状態になり、予約対象から除外される

  - name: 部屋の検索・参照
    description: 施設管理者、フロントスタッフ、清掃スタッフが部屋情報を検索・参照できる。部屋の空き状況確認や清掃対象の把握に活用する。
    events:
      - 部屋が検索された
    policy: []
    scenarios:
      - name: 空き部屋の確認フロー
        precondition: フロントスタッフがログイン済み、ウォークイン客が来館している
        steps:
          - 部屋検索画面を開く
          - 対象施設を選択する
          - 部屋状態でVacantを条件に指定する
          - 検索を実行し、空き部屋の一覧を表示する
          - 部屋タイプや階数を確認し、適切な部屋を選定する
        postcondition: 空き部屋が確認でき、顧客に案内可能な部屋を特定できる
      - name: 清掃対象部屋の確認フロー
        precondition: 清掃スタッフがログイン済み、清掃業務を開始する
        steps:
          - 部屋検索画面を開く
          - 対象施設を選択する
          - 部屋状態でDirtyまたはCleaningを条件に指定する
          - 検索を実行し、清掃対象の部屋一覧を表示する
          - 優先順位を確認し、清掃スケジュールを決定する
        postcondition: 清掃対象の部屋が把握でき、効率的な清掃業務が計画できる

  - name: 部屋状態の遷移管理
    description: フロントスタッフと清掃スタッフが部屋の状態遷移（Vacant→Occupied→Dirty→Cleaning→Inspected→Vacant）を記録・管理できる。チェックイン・チェックアウト・清掃業務の状況を正確に追跡する。
    events:
      - チェックインが完了した
      - 部屋が清掃前状態になった
      - 清掃開始が記録された
      - 清掃完了が記録された
      - 部屋がVacant状態になった
    policy:
      - name: チェックアウト後清掃必要化ポリシー
        trigger: 部屋が清掃前状態になった
        action: 該当部屋を清掃スタッフの清掃対象リストに追加する
    scenarios:
      - name: チェックイン処理フロー
        precondition: フロントスタッフがログイン済み、予約済みの顧客が到着している
        steps:
          - 予約情報から割り当て部屋を確認する
          - 部屋の現在状態がVacantであることを確認する
          - チェックイン処理を実行する
          - 部屋状態をOccupiedに変更する
          - 鍵を顧客に渡す
        postcondition: 部屋がOccupied状態になり、顧客が入室可能になる
      - name: 清掃完了報告フロー
        precondition: 清掃スタッフがログイン済み、部屋の清掃が完了している
        steps:
          - 清掃完了した部屋を選択する
          - 清掃完了を報告し、部屋状態をInspectedに変更する
          - 検査担当者による確認を待つ
          - 検査合格後、部屋状態をVacantに変更する
        postcondition: 部屋がVacant状態になり、次の予約に対応可能になる
