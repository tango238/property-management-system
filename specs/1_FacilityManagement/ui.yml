view:
  # ========================================
  # 施設管理者向け画面
  # ========================================

  # 施設管理
  - name: "施設登録画面"
    actor: "施設管理者"
    purpose: "新規施設の基本情報を登録する"
    input_fields:
      - field_name: "施設名"
        type: "text"
        required: true
        description: "施設の正式名称"
        validation: "100文字以内"
        placeholder: "例：グランドホテル東京"
      - field_name: "郵便番号"
        type: "text"
        required: true
        description: "施設の郵便番号"
        validation: "半角数字7桁（ハイフンなし）"
        placeholder: "1000001"
      - field_name: "住所"
        type: "text"
        required: true
        description: "施設の所在地"
        validation: "200文字以内"
        placeholder: "例：東京都千代田区..."
      - field_name: "電話番号"
        type: "text"
        required: true
        description: "施設の代表電話番号"
        validation: "半角数字とハイフンのみ"
        placeholder: "03-1234-5678"
      - field_name: "メールアドレス"
        type: "text"
        required: false
        description: "施設の代表メールアドレス"
        validation: "メール形式"
        placeholder: "info@example.com"
      - field_name: "チェックイン時刻"
        type: "time_picker"
        required: true
        description: "標準のチェックイン開始時刻"
        default: "15:00"
      - field_name: "チェックアウト時刻"
        type: "time_picker"
        required: true
        description: "標準のチェックアウト時刻"
        default: "10:00"
      - field_name: "アメニティ"
        type: "multi_select"
        required: false
        options:
          - "Wi-Fi"
          - "駐車場"
          - "レストラン"
          - "大浴場"
          - "フィットネス"
          - "コインランドリー"
        description: "施設で提供するアメニティ"
      - field_name: "施設説明"
        type: "textarea"
        required: false
        description: "施設の詳細説明"
        validation: "1000文字以内"
    actions:
      - "登録"
      - "キャンセル"
    related_models:
      - "施設"
    related_usecases:
      - "新規施設の登録"

  - name: "施設更新画面"
    actor: "施設管理者"
    purpose: "既存施設の情報を変更する"
    input_fields:
      - field_name: "施設名"
        type: "text"
        required: true
        description: "施設の正式名称"
        validation: "100文字以内"
      - field_name: "郵便番号"
        type: "text"
        required: true
        description: "施設の郵便番号"
        validation: "半角数字7桁（ハイフンなし）"
      - field_name: "住所"
        type: "text"
        required: true
        description: "施設の所在地"
        validation: "200文字以内"
      - field_name: "電話番号"
        type: "text"
        required: true
        description: "施設の代表電話番号"
        validation: "半角数字とハイフンのみ"
      - field_name: "メールアドレス"
        type: "text"
        required: false
        description: "施設の代表メールアドレス"
        validation: "メール形式"
      - field_name: "チェックイン時刻"
        type: "time_picker"
        required: true
        description: "標準のチェックイン開始時刻"
      - field_name: "チェックアウト時刻"
        type: "time_picker"
        required: true
        description: "標準のチェックアウト時刻"
      - field_name: "アメニティ"
        type: "multi_select"
        required: false
        options:
          - "Wi-Fi"
          - "駐車場"
          - "レストラン"
          - "大浴場"
          - "フィットネス"
          - "コインランドリー"
        description: "施設で提供するアメニティ"
      - field_name: "施設説明"
        type: "textarea"
        required: false
        description: "施設の詳細説明"
        validation: "1000文字以内"
    display_fields:
      - "施設ID"
      - "登録日時"
      - "最終更新日時"
    actions:
      - "更新"
      - "キャンセル"
    related_models:
      - "施設"
    related_usecases:
      - "施設情報の更新"

  - name: "施設検索画面"
    actor: "施設管理者"
    purpose: "登録済み施設を検索・一覧表示する"
    filters:
      - "施設名"
      - "地域"
    display_fields:
      - "施設名"
      - "住所"
      - "電話番号"
      - "部屋数"
      - "登録日時"
    actions:
      - "検索"
      - "クリア"
      - "新規登録"
      - "詳細表示"
      - "編集"
      - "削除"
    related_models:
      - "施設"
    related_usecases:
      - "施設一覧の検索・確認"
      - "施設情報の削除"

  - name: "施設詳細画面"
    actor: "施設管理者"
    purpose: "施設の詳細情報を参照する"
    display_fields:
      - "施設ID"
      - "施設名"
      - "郵便番号"
      - "住所"
      - "電話番号"
      - "メールアドレス"
      - "チェックイン時刻"
      - "チェックアウト時刻"
      - "アメニティ"
      - "施設説明"
      - "部屋タイプ数"
      - "総部屋数"
      - "登録日時"
      - "最終更新日時"
    actions:
      - "編集"
      - "削除"
      - "部屋タイプ管理"
      - "部屋管理"
      - "戻る"
    related_models:
      - "施設"
      - "部屋タイプ"
      - "部屋"
    related_usecases:
      - "施設詳細情報の参照"

  # 部屋タイプ管理
  - name: "部屋タイプ登録画面"
    actor: "施設管理者"
    purpose: "新規部屋タイプを登録する"
    input_fields:
      - field_name: "対象施設"
        type: "select"
        required: true
        description: "部屋タイプを登録する施設"
      - field_name: "部屋タイプ名"
        type: "text"
        required: true
        description: "部屋タイプの名称"
        validation: "50文字以内"
        placeholder: "例：シングル、ダブル、ツイン"
      - field_name: "収容人数"
        type: "number"
        required: true
        description: "最大収容人数"
        validation: "1以上の整数"
        unit: "名"
      - field_name: "喫煙可否"
        type: "radio_group"
        required: true
        options:
          - "喫煙可"
          - "禁煙"
        description: "部屋の喫煙可否"
      - field_name: "ベッド構成"
        type: "text"
        required: true
        description: "ベッドの種類と数"
        placeholder: "例：シングルベッド×1、ダブルベッド×1"
      - field_name: "標準料金"
        type: "number"
        required: true
        description: "1泊あたりの標準料金"
        validation: "0以上の整数"
        unit: "円"
      - field_name: "部屋アメニティ"
        type: "multi_select"
        required: false
        options:
          - "エアコン"
          - "テレビ"
          - "冷蔵庫"
          - "バス・トイレ"
          - "ドライヤー"
          - "金庫"
        description: "部屋に設置されるアメニティ"
      - field_name: "部屋タイプ説明"
        type: "textarea"
        required: false
        description: "部屋タイプの詳細説明"
        validation: "500文字以内"
    actions:
      - "登録"
      - "キャンセル"
    related_models:
      - "部屋タイプ"
      - "施設"
    related_usecases:
      - "新規部屋タイプの登録"

  - name: "部屋タイプ更新画面"
    actor: "施設管理者"
    purpose: "部屋タイプ情報を変更する（料金改定含む）"
    input_fields:
      - field_name: "部屋タイプ名"
        type: "text"
        required: true
        description: "部屋タイプの名称"
        validation: "50文字以内"
      - field_name: "収容人数"
        type: "number"
        required: true
        description: "最大収容人数"
        validation: "1以上の整数"
        unit: "名"
      - field_name: "喫煙可否"
        type: "radio_group"
        required: true
        options:
          - "喫煙可"
          - "禁煙"
        description: "部屋の喫煙可否"
      - field_name: "ベッド構成"
        type: "text"
        required: true
        description: "ベッドの種類と数"
      - field_name: "標準料金"
        type: "number"
        required: true
        description: "1泊あたりの標準料金"
        validation: "0以上の整数"
        unit: "円"
      - field_name: "部屋アメニティ"
        type: "multi_select"
        required: false
        options:
          - "エアコン"
          - "テレビ"
          - "冷蔵庫"
          - "バス・トイレ"
          - "ドライヤー"
          - "金庫"
        description: "部屋に設置されるアメニティ"
      - field_name: "部屋タイプ説明"
        type: "textarea"
        required: false
        description: "部屋タイプの詳細説明"
        validation: "500文字以内"
    display_fields:
      - "部屋タイプID"
      - "所属施設"
      - "登録日時"
      - "最終更新日時"
    actions:
      - "更新"
      - "キャンセル"
    related_models:
      - "部屋タイプ"
    related_usecases:
      - "部屋タイプの料金改定"

  - name: "部屋タイプ検索画面"
    actor: "施設管理者"
    purpose: "部屋タイプを検索・一覧表示する"
    filters:
      - "施設"
      - "部屋タイプ名"
      - "喫煙可否"
    display_fields:
      - "部屋タイプ名"
      - "収容人数"
      - "喫煙可否"
      - "標準料金"
      - "紐づく部屋数"
    actions:
      - "検索"
      - "クリア"
      - "新規登録"
      - "詳細表示"
      - "編集"
      - "削除"
    related_models:
      - "部屋タイプ"
      - "施設"
    related_usecases:
      - "部屋タイプ一覧の検索・参照"
      - "部屋タイプの削除"

  # 部屋管理
  - name: "部屋登録画面"
    actor: "施設管理者"
    purpose: "新規部屋を登録する"
    input_fields:
      - field_name: "対象施設"
        type: "select"
        required: true
        description: "部屋を登録する施設"
      - field_name: "部屋番号"
        type: "text"
        required: true
        description: "部屋の識別番号"
        validation: "20文字以内、施設内で一意"
        placeholder: "例：101、A-201"
      - field_name: "部屋タイプ"
        type: "select"
        required: true
        description: "部屋のタイプ"
      - field_name: "階数"
        type: "number"
        required: false
        description: "部屋のある階"
        unit: "階"
      - field_name: "初期状態"
        type: "select"
        required: true
        options:
          - "Vacant"
          - "Out-of-order"
        description: "部屋の初期状態"
        default: "Vacant"
      - field_name: "備考"
        type: "textarea"
        required: false
        description: "部屋に関する備考"
        validation: "200文字以内"
    actions:
      - "登録"
      - "キャンセル"
    related_models:
      - "部屋"
      - "部屋タイプ"
      - "施設"
    related_usecases:
      - "新規部屋の登録"

  - name: "部屋更新画面"
    actor: "施設管理者"
    purpose: "部屋情報を変更する（メンテナンス設定含む）"
    input_fields:
      - field_name: "部屋番号"
        type: "text"
        required: true
        readonly: true
        description: "部屋の識別番号"
      - field_name: "部屋タイプ"
        type: "select"
        required: true
        description: "部屋のタイプ"
      - field_name: "階数"
        type: "number"
        required: false
        description: "部屋のある階"
        unit: "階"
      - field_name: "部屋状態"
        type: "select"
        required: true
        options:
          - "Vacant"
          - "Occupied"
          - "Dirty"
          - "Cleaning"
          - "Inspected"
          - "Out-of-order"
        description: "部屋の現在状態"
      - field_name: "メンテナンス理由"
        type: "textarea"
        required: false
        description: "Out-of-order時のメンテナンス理由"
        validation: "200文字以内"
      - field_name: "備考"
        type: "textarea"
        required: false
        description: "部屋に関する備考"
        validation: "200文字以内"
    display_fields:
      - "部屋ID"
      - "所属施設"
      - "登録日時"
      - "最終更新日時"
    actions:
      - "更新"
      - "キャンセル"
    validations:
      - "Out-of-order状態にする場合はメンテナンス理由が必須"
      - "予約がある部屋はOut-of-order状態に変更不可"
    related_models:
      - "部屋"
    related_usecases:
      - "部屋のメンテナンス開始"

  - name: "部屋検索画面（管理者）"
    actor: "施設管理者"
    purpose: "全体の部屋状況を把握する"
    filters:
      - "施設"
      - "部屋タイプ"
      - "部屋状態"
      - "階数"
    display_fields:
      - "部屋番号"
      - "部屋タイプ"
      - "部屋状態"
      - "階数"
      - "最終更新日時"
    actions:
      - "検索"
      - "クリア"
      - "新規登録"
      - "詳細表示"
      - "編集"
      - "削除"
    related_models:
      - "部屋"
      - "部屋タイプ"
      - "施設"
    related_usecases:
      - "部屋一覧の検索・参照"
      - "部屋情報の削除"

  # ========================================
  # 予約管理担当者向け画面
  # ========================================

  - name: "施設詳細画面（予約担当者）"
    actor: "予約管理担当者"
    purpose: "顧客対応のため施設の詳細情報を参照する"
    display_fields:
      - "施設名"
      - "住所"
      - "電話番号"
      - "チェックイン時刻"
      - "チェックアウト時刻"
      - "アメニティ"
      - "施設説明"
    actions:
      - "部屋タイプ一覧表示"
      - "戻る"
    related_models:
      - "施設"
    related_usecases:
      - "施設詳細情報の参照"

  - name: "部屋タイプ比較画面"
    actor: "予約管理担当者"
    purpose: "顧客に最適な部屋タイプを案内するため比較確認する"
    filters:
      - "施設"
      - "収容人数"
      - "喫煙可否"
    display_fields:
      - "部屋タイプ名"
      - "収容人数"
      - "喫煙可否"
      - "ベッド構成"
      - "標準料金"
      - "部屋アメニティ"
      - "空き部屋数"
    actions:
      - "検索"
      - "クリア"
      - "詳細表示"
    related_models:
      - "部屋タイプ"
      - "施設"
    related_usecases:
      - "部屋タイプの比較確認"

  # ========================================
  # フロントスタッフ向け画面
  # ========================================

  - name: "空き部屋検索画面"
    actor: "フロントスタッフ"
    purpose: "ウォークイン客に対応するため空き部屋を検索する"
    filters:
      - "施設"
      - "部屋タイプ"
      - "階数"
    display_fields:
      - "部屋番号"
      - "部屋タイプ"
      - "収容人数"
      - "標準料金"
      - "階数"
    actions:
      - "検索"
      - "クリア"
      - "チェックインへ"
    validations:
      - "Vacant状態の部屋のみ表示"
    related_models:
      - "部屋"
      - "部屋タイプ"
    related_usecases:
      - "空き部屋の検索・確認"

  - name: "チェックイン画面"
    actor: "フロントスタッフ"
    purpose: "顧客のチェックイン処理を行う"
    input_fields:
      - field_name: "予約番号"
        type: "text"
        required: false
        description: "予約済みの場合の予約番号"
        placeholder: "予約番号を入力"
      - field_name: "部屋番号"
        type: "select"
        required: true
        description: "チェックインする部屋"
    display_fields:
      - "部屋状態"
      - "部屋タイプ"
      - "収容人数"
      - "料金"
    actions:
      - "チェックイン実行"
      - "キャンセル"
    validations:
      - "部屋状態がVacantでないとチェックイン不可"
    related_models:
      - "部屋"
    related_usecases:
      - "チェックイン処理"

  - name: "チェックアウト画面"
    actor: "フロントスタッフ"
    purpose: "顧客のチェックアウト処理を行い清掃依頼する"
    input_fields:
      - field_name: "部屋番号"
        type: "select"
        required: true
        description: "チェックアウトする部屋"
    display_fields:
      - "部屋状態"
      - "チェックイン日時"
    actions:
      - "チェックアウト実行"
      - "キャンセル"
    validations:
      - "部屋状態がOccupiedでないとチェックアウト不可"
    related_models:
      - "部屋"
    related_usecases:
      - "チェックアウト後の清掃依頼"

  - name: "部屋状態変更画面"
    actor: "フロントスタッフ"
    purpose: "検査合格した部屋を予約可能にする"
    filters:
      - "施設"
      - "部屋状態"
    display_fields:
      - "部屋番号"
      - "部屋タイプ"
      - "現在の状態"
    input_fields:
      - field_name: "部屋番号"
        type: "select"
        required: true
        description: "状態を変更する部屋"
      - field_name: "変更後の状態"
        type: "select"
        required: true
        options:
          - "Vacant"
        description: "変更後の部屋状態"
    actions:
      - "状態変更"
      - "キャンセル"
    validations:
      - "Inspected状態からのみVacantに変更可能"
    related_models:
      - "部屋"
    related_usecases:
      - "検査合格後の部屋開放"

  # ========================================
  # 清掃スタッフ向け画面
  # ========================================

  - name: "清掃対象部屋一覧画面"
    actor: "清掃スタッフ"
    purpose: "清掃対象の部屋を確認し業務計画を立てる"
    filters:
      - "施設"
      - "階数"
    display_fields:
      - "部屋番号"
      - "部屋タイプ"
      - "部屋状態"
      - "階数"
      - "チェックアウト日時"
    actions:
      - "検索"
      - "クリア"
      - "清掃開始"
    validations:
      - "Dirty/Cleaning状態の部屋のみ表示"
    related_models:
      - "部屋"
    related_usecases:
      - "清掃対象部屋の確認"

  - name: "清掃開始画面"
    actor: "清掃スタッフ"
    purpose: "清掃開始を記録する"
    input_fields:
      - field_name: "部屋番号"
        type: "select"
        required: true
        description: "清掃を開始する部屋"
    display_fields:
      - "部屋状態"
      - "部屋タイプ"
    actions:
      - "清掃開始"
      - "キャンセル"
    validations:
      - "Dirty状態からのみ清掃開始可能"
    related_models:
      - "部屋"
    related_usecases:
      - "清掃開始の記録"

  - name: "清掃完了報告画面"
    actor: "清掃スタッフ"
    purpose: "清掃完了を報告する"
    input_fields:
      - field_name: "部屋番号"
        type: "select"
        required: true
        description: "清掃が完了した部屋"
      - field_name: "清掃メモ"
        type: "textarea"
        required: false
        description: "清掃に関するメモや報告事項"
        validation: "200文字以内"
    display_fields:
      - "部屋状態"
      - "清掃開始日時"
    actions:
      - "清掃完了報告"
      - "キャンセル"
    validations:
      - "Cleaning状態からのみ完了報告可能"
    related_models:
      - "部屋"
    related_usecases:
      - "清掃完了報告"

# ========================================
# 共通コンポーネント
# ========================================
common_components:
  - component_name: "施設選択ドロップダウン"
    description: "登録済みの施設をドロップダウンで選択するコンポーネント"
    used_in:
      - "部屋タイプ登録画面"
      - "部屋タイプ検索画面"
      - "部屋登録画面"
      - "部屋検索画面（管理者）"
      - "空き部屋検索画面"
      - "部屋タイプ比較画面"
      - "清掃対象部屋一覧画面"

  - component_name: "部屋タイプ選択ドロップダウン"
    description: "登録済みの部屋タイプをドロップダウンで選択するコンポーネント"
    used_in:
      - "部屋登録画面"
      - "部屋更新画面"
      - "部屋検索画面（管理者）"
      - "空き部屋検索画面"

  - component_name: "部屋状態バッジ"
    description: "部屋状態を色分けして表示するバッジコンポーネント"
    used_in:
      - "部屋検索画面（管理者）"
      - "空き部屋検索画面"
      - "清掃対象部屋一覧画面"
      - "チェックイン画面"
      - "チェックアウト画面"
      - "部屋状態変更画面"

  - component_name: "確認ダイアログ"
    description: "削除・状態変更前の確認ダイアログ"
    used_in:
      - "施設検索画面"
      - "部屋タイプ検索画面"
      - "部屋検索画面（管理者）"
      - "チェックイン画面"
      - "チェックアウト画面"

# ========================================
# バリデーションルール
# ========================================
validations:
  - field: "施設削除"
    rule: "関連する予約がある施設は削除不可"
  - field: "部屋タイプ削除"
    rule: "紐づく部屋が存在する部屋タイプは削除不可"
  - field: "部屋削除"
    rule: "予約がある部屋、またはVacant/Out-of-order以外の状態の部屋は削除不可"
  - field: "部屋状態遷移"
    rule: "Vacant→Occupied（チェックイン）、Occupied→Dirty（チェックアウト）、Dirty→Cleaning（清掃開始）、Cleaning→Inspected（清掃完了）、Inspected→Vacant（検査合格）のみ許可"
  - field: "Out-of-order設定"
    rule: "予約がある部屋をOut-of-orderに変更不可"
  - field: "部屋番号"
    rule: "同一施設内で部屋番号は一意である必要がある"
