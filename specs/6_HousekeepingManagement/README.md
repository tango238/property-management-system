# 清掃管理

## 背景

宿泊施設の清掃業務は、チェックアウト後の部屋を次のゲストのために迅速に準備することが重要である。次のチェックイン時刻を考慮した優先順位付けと、モバイルデバイスでのリアルタイムな状態更新により、清掃業務の効率化を実現する必要がある。

## 目的

- チェックアウト後の部屋を即座に清掃対象リストに追加する
- 次のチェックイン時刻に基づいて清掃優先順位を自動算出する
- モバイルデバイスで清掃状況をリアルタイムに更新する
- 備品不足を記録し、補充依頼を迅速に行う

## 主要アクター

- 清掃スタッフ
- フロントスタッフ

## 業務概要

清掃管理では、清掃対象の抽出・優先順位の表示、清掃状況の更新、清掃完了の通知、備品不足の記録を行う。チェックアウト後の部屋は自動的に清掃対象に追加され、次のチェックイン時刻に基づいて優先順位が算出される。清掃スタッフはモバイルデバイスで清掃開始・完了を記録し、部屋状態をCleaning→Inspected→Vacantと遷移させる。備品不足があれば記録し、補充依頼を送信する。

## 要求

### 清掃スタッフ
清掃対象部屋の確認、清掃状況の更新、備品不足の記録、清掃完了通知を行う

### フロントスタッフ
チェックイン・チェックアウト処理、宿泊者名簿の確認、ゲスト要望の更新、部屋のアサインを行う

## 機能

### 清掃対象を確認する
- 清掃対象を抽出する
  - 清掃対象部屋を一覧表示する（画面：清掃対象部屋一覧表示画面、アクター：清掃スタッフ）
  - 清掃が必要な部屋を抽出表示する
- 優先順位を表示する
  - 清掃優先順位を表示する（画面：清掃優先順位表示画面、アクター：清掃スタッフ）
  - 次のチェックイン時刻などから優先順位を表示する

### 清掃状況を更新する
- 清掃開始を記録する
  - 清掃開始を記録する（画面：清掃開始記録画面、アクター：清掃スタッフ）
  - 清掃作業の開始を記録しCleaning状態にする
- 清掃完了を記録する
  - 清掃完了を記録する（画面：清掃完了記録画面、アクター：清掃スタッフ）
  - 清掃作業の完了を記録しInspected状態にする
- 部屋を利用可能にする
  - 部屋をVacant状態にする（画面：部屋Vacant状態に画面、アクター：清掃スタッフ、フロントスタッフ）
  - 点検完了後、部屋をVacant状態にする

### 清掃完了を通知する
- 完了通知を送信する
  - 清掃完了を通知する（画面：清掃完了通知画面、アクター：清掃スタッフ）
  - フロントスタッフに清掃完了を通知する

### 備品不足を記録する
- 備品不足を入力する
  - 備品不足を記録する（画面：備品不足記録画面、アクター：清掃スタッフ）
  - 不足している備品や破損を記録する
- 補充依頼を送信する
  - 備品補充を依頼する（画面：備品補充依頼画面、アクター：清掃スタッフ）
  - 備品の補充依頼を送信する

## ビジネスルール

### チェックアウト後即時清掃依頼
- コンテキスト：清掃管理
- 説明：チェックアウトが完了したら、部屋を即座に清掃対象リストに追加する
- 関連バリエーション：部屋状態ステータス（Vacant, Occupied, Dirty, Cleaning, Inspected, Out-of-order）、清掃状態（未着手, 清掃中, 完了, 点検済み）
- 関連状態モデル：部屋状態、清掃状態

### 清掃優先順位の自動算出
- コンテキスト：清掃管理
- 説明：次のチェックイン時刻が近い部屋を優先的に清掃する
- 関連バリエーション：予約状態（仮予約, 予約確定, チェックイン済み, チェックアウト済み, キャンセル）
- 関連状態モデル：予約状態

### モバイル対応必須
- コンテキスト：清掃管理
- 説明：清掃状況更新などの現場作業はモバイルデバイスで実施可能とする

## ビジネスパラメーター

### 清掃状態
- 値：未着手、清掃中、完了、点検済み
- 説明：清掃作業の進捗を表し、清掃対象の抽出や完了通知の条件に使用する
- 状態遷移：
  - 未着手 → 清掃中（清掃開始を記録する）
  - 清掃中 → 完了（清掃完了を記録する）
  - 完了 → 点検済み（部屋をVacant状態にする）

### 部屋状態ステータス（清掃関連）
- 値：Dirty、Cleaning、Inspected、Vacant
- 説明：部屋の清掃状況を表し、清掃対象の判定と予約可能性の制御に使用する
- 状態遷移：
  - Dirty → Cleaning（清掃開始を記録する）
  - Cleaning → Inspected（清掃完了を記録する）
  - Inspected → Vacant（部屋をVacant状態にする）
