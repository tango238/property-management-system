actor:
  - name: 清掃スタッフ
    description: 客室の清掃業務を担当するスタッフ。チェックアウト後の部屋を迅速に清掃し、次のゲストを迎える準備を整えることが主な責務。モバイルデバイスを使用して現場で清掃状況をリアルタイムに更新する。

  - name: フロントスタッフ
    description: フロント業務を担当するスタッフ。チェックイン・チェックアウト処理を行い、清掃完了状況を確認して部屋のアサインを実施する。清掃スタッフからの完了通知を受けて、部屋を利用可能状態にする。

external_system:
  - name: プッシュ通知サービス
    description: 清掃完了時にフロントスタッフへリアルタイムで通知を送信する外部サービス。モバイルデバイスやPCへの即時通知により、部屋の空き状況を迅速に共有する。

aggregate:
  - 部屋
  - 清掃タスク
  - 備品
  - 補充依頼

feature:
  - name: 清掃対象部屋の抽出と優先順位表示
    description: チェックアウト後の部屋を自動的に清掃対象リストに追加し、次のチェックイン時刻に基づいて優先順位を算出・表示する。清掃スタッフが効率的に作業を進められるよう、優先度の高い部屋から順に一覧表示する。
    events:
      - 清掃対象が抽出された
      - 清掃優先順位が算出された
    policy:
      - name: チェックアウト後自動清掃対象追加ポリシー
        trigger: チェックアウトが完了した
        action: 該当部屋を清掃対象リストに自動追加し、部屋状態をDirtyに変更する
      - name: 優先順位自動算出ポリシー
        trigger: 清掃対象が抽出された
        action: 次のチェックイン時刻を基準に清掃優先順位を自動計算し、リストを並び替える
    scenarios:
      - name: 朝の清掃業務開始フロー
        precondition: 清掃スタッフがモバイルデバイスでログイン済み、チェックアウト処理が複数件完了している
        steps:
          - 清掃対象部屋一覧画面を開く
          - システムがチェックアウト済みの部屋を自動抽出し一覧表示する
          - 各部屋の次のチェックイン時刻と優先順位を確認する
          - 優先順位の高い部屋から清掃作業を開始する部屋を選択する
        postcondition: 清掃スタッフが優先度順に整理された清掃対象部屋リストを確認できる

      - name: 急ぎの清掃対象確認フロー
        precondition: 当日チェックイン予定の部屋がまだ清掃されていない
        steps:
          - 清掃優先順位表示画面を開く
          - チェックイン時刻が迫っている部屋を優先表示で確認する
          - 高優先度の部屋の詳細情報（部屋番号、チェックイン時刻、ゲスト名）を確認する
          - 優先的に対応すべき部屋を特定し、清掃作業に着手する
        postcondition: 緊急度の高い清掃対象が特定され、遅延なく対応できる

  - name: 清掃状況の更新と部屋状態遷移
    description: 清掃スタッフがモバイルデバイスで清掃の開始・完了を記録し、部屋状態をDirty→Cleaning→Inspected→Vacantと遷移させる。リアルタイムな状況更新により、フロントスタッフが最新の部屋状況を把握できる。
    events:
      - 清掃が開始された
      - 清掃が完了した
      - 部屋がVacant状態になった
    policy:
      - name: 清掃開始時状態更新ポリシー
        trigger: 清掃が開始された
        action: 部屋状態をDirtyからCleaningに変更し、清掃タスクの開始時刻を記録する
      - name: 清掃完了時状態更新ポリシー
        trigger: 清掃が完了した
        action: 部屋状態をCleaningからInspectedに変更し、清掃タスクの完了時刻を記録する
    scenarios:
      - name: 部屋清掃の一連のフロー
        precondition: 清掃スタッフが清掃対象部屋一覧を確認済み、清掃用具を準備済み
        steps:
          - 清掃対象の部屋に移動する
          - モバイルデバイスで清掃開始を記録し、部屋状態がCleaningになる
          - ベッドメイキング、バスルーム清掃、アメニティ補充などの清掃作業を実施する
          - 清掃完了後、モバイルデバイスで清掃完了を記録し、部屋状態がInspectedになる
          - 次の清掃対象部屋へ移動する
        postcondition: 清掃作業が記録され、部屋状態がInspectedに更新される

      - name: 点検後の部屋開放フロー
        precondition: 清掃が完了し、部屋がInspected状態になっている
        steps:
          - 清掃完了した部屋の最終点検を行う
          - 問題がなければ部屋をVacant状態に変更する
          - システムが自動的にフロントスタッフに完了通知を送信する
          - フロントスタッフが部屋の利用可能状態を確認する
        postcondition: 部屋がVacant状態となり、次のゲストへのアサインが可能になる

  - name: 清掃完了通知の送信
    description: 清掃が完了した際に、フロントスタッフへリアルタイムで通知を送信する。チェックイン待ちのゲストがいる場合、迅速な部屋アサインと案内を可能にする。
    events:
      - 清掃完了通知が送信された
      - 清掃完了通知が確認された
    policy:
      - name: 清掃完了自動通知ポリシー
        trigger: 部屋がVacant状態になった
        action: フロントスタッフのデバイスにプッシュ通知を送信し、該当部屋が利用可能になったことを知らせる
    scenarios:
      - name: チェックイン待ちゲストへの対応フロー
        precondition: ゲストがフロントでチェックイン待ちをしている、該当部屋が清掃中
        steps:
          - 清掃スタッフが清掃を完了し、部屋をVacant状態にする
          - システムがフロントスタッフにプッシュ通知を送信する
          - フロントスタッフが通知を受け取り、部屋の準備完了を確認する
          - ゲストに部屋の準備が整ったことを伝え、チェックイン手続きを完了する
          - ルームキーを渡してゲストを部屋に案内する
        postcondition: 待機中のゲストが迅速にチェックインでき、顧客満足度が向上する

  - name: 備品不足の記録と補充依頼
    description: 清掃中に発見した備品不足や破損を記録し、担当部署へ補充依頼を送信する。備品の適切な管理により、ゲストへのサービス品質を維持する。
    events:
      - 備品不足が記録された
      - 補充依頼が送信された
      - 補充が完了した
    policy:
      - name: 備品不足自動通知ポリシー
        trigger: 備品不足が記録された
        action: 在庫管理担当者に備品不足の通知を送信し、補充対応を促す
    scenarios:
      - name: 清掃中の備品不足発見と補充依頼フロー
        precondition: 清掃スタッフが部屋の清掃作業中
        steps:
          - 清掃中にタオルやアメニティなどの備品不足を発見する
          - モバイルデバイスで備品不足記録画面を開く
          - 不足している備品の種類と数量を入力する
          - 必要に応じて破損状況の写真を添付する
          - 補充依頼を送信する
        postcondition: 備品不足が記録され、担当部署に補充依頼が通知される

      - name: 備品補充と確認フロー
        precondition: 補充依頼が送信され、担当部署が対応中
        steps:
          - 担当部署が補充依頼を確認する
          - 必要な備品を準備し、該当部屋に補充する
          - 補充完了をシステムに記録する
          - 清掃スタッフが補充完了を確認し、清掃作業を継続する
        postcondition: 備品が補充され、部屋が完全な状態でゲストを迎える準備が整う
